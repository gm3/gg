(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function c(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(t){if(t.ep)return;t.ep=!0;const n=c(t);fetch(t.href,n)}})();let ae="skill_tree_progress",ue={},U={},_e={};function ye(e){ae=e.storageKey||"skill_tree_progress",ue={},Object.keys(e.statTypes||{}).forEach(s=>{ue[s.toUpperCase()]=s}),_e=e.statTypes||{},U=e.defaultStats||{},N={completedQuests:[],lastUpdated:null,reflections:{},stats:{...U}}}function le(){return{..._e}}let N={completedQuests:[],lastUpdated:null,reflections:{},stats:{}};const se=new Set;function Y(){for(const e of se)e(N)}function be(){try{const e=window.localStorage.getItem(ae);if(!e)return N.stats={...U},N;const s=JSON.parse(e);if(!Array.isArray(s.completedQuests))return N.stats={...U},N;N={completedQuests:s.completedQuests,lastUpdated:s.lastUpdated||null,reflections:s.reflections||{},stats:s.stats||{...U}},Y()}catch{N.stats={...U}}return N}function ce(){try{window.localStorage.setItem(ae,JSON.stringify(N))}catch{}}function D(e){return N.completedQuests.includes(e)}function ve(e,s,c={}){const o=N.completedQuests.includes(e),t=new Set(N.completedQuests);if(s&&!o){t.add(e);const n={...N.stats};Object.keys(c).forEach(i=>{n[i]=(n[i]||0)+(c[i]||0)}),N={...N,completedQuests:Array.from(t),stats:n,lastUpdated:new Date().toISOString().slice(0,10)}}else if(!s&&o){t.delete(e);const n={...N.stats};Object.keys(c).forEach(i=>{n[i]=Math.max(0,(n[i]||0)-(c[i]||0))}),N={...N,completedQuests:Array.from(t),stats:n,lastUpdated:new Date().toISOString().slice(0,10)}}ce(),Y()}function oe(){return N}function we(e,s){N={...N,reflections:{...N.reflections,[e]:s},lastUpdated:new Date().toISOString().slice(0,10)},ce(),Y()}function G(){N={completedQuests:[],lastUpdated:new Date().toISOString().slice(0,10),reflections:{},stats:{...U}},ce(),Y()}function Ce(e){return se.add(e),()=>se.delete(e)}function Ne(){return{...N.stats}}function Se(){return Object.values(N.stats).reduce((e,s)=>e+s,0)}function q(e,s,c=null){const o=Ne(),t=Se(),n=document.createElement("div");if(n.className="character-stats",c){const a=document.createElement("div");a.className="character-stats__toggle",a.appendChild(c),n.appendChild(a)}const i=document.createElement("div");i.className="character-stats__bar";const h=document.createElement("div");h.className="character-stats__stat";const u=document.createElement("span");u.className="character-stats__value",u.textContent=`${e}/${s}`;const l=document.createElement("span");l.className="character-stats__label",l.textContent="Nodes",h.appendChild(u),h.appendChild(l),i.appendChild(h);const r=le();Object.entries(o).forEach(([a,C])=>{const v=document.createElement("div");v.className="character-stats__stat";const _=document.createElement("span");_.className="character-stats__value",_.textContent=`+${C}`;const S=document.createElement("span");S.className="character-stats__label",S.textContent=r[a]||a,v.appendChild(_),v.appendChild(S),i.appendChild(v)});const m=document.createElement("div");m.className="character-stats__stat character-stats__stat--total";const E=document.createElement("span");E.className="character-stats__value",E.textContent=t;const d=document.createElement("span");return d.className="character-stats__label",d.textContent="Total",m.appendChild(E),m.appendChild(d),i.appendChild(m),n.appendChild(i),n}function xe(e,s,c){const o=D(e.id),t=document.createElement("div");t.className="node-modal",t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true");const n=document.createElement("div");n.className="node-modal__backdrop",n.addEventListener("click",s),t.appendChild(n);const i=document.createElement("div");i.className="node-modal__content";const h=document.createElement("div");h.className="node-modal__header";const u=document.createElement("div");u.className="node-modal__title-row";const l=document.createElement("span");l.className="node-modal__emoji",l.textContent=e.emoji||"üçÉ";const r=document.createElement("h2");r.className="node-modal__title",r.textContent=e.title,u.appendChild(l),u.appendChild(r),h.appendChild(u);const m=document.createElement("button");m.className="node-modal__close",m.textContent="√ó",m.setAttribute("aria-label","Close modal"),m.addEventListener("click",s),h.appendChild(m),i.appendChild(h);const E=document.createElement("div");E.className="node-modal__body";const d=document.createElement("p");d.className="node-modal__description",d.textContent=e.description,E.appendChild(d);const a=document.createElement("div");a.className="node-modal__meta";const C=document.createElement("span");if(C.className="node-modal__category",C.textContent=`${e.category} ‚Ä¢ Tier ${e.tier}`,a.appendChild(C),E.appendChild(a),e.points){const T=document.createElement("div");T.className="node-modal__points";const A=document.createElement("h3");A.className="node-modal__points-title",A.textContent="Points Awarded:",T.appendChild(A);const k=document.createElement("div");k.className="node-modal__points-list";const I=le();Object.entries(e.points).forEach(([f,y])=>{if(y>0){const g=document.createElement("div");g.className="node-modal__point-item";const b=document.createElement("span");b.className="node-modal__point-label",b.textContent=I[f]||f;const w=document.createElement("span");w.className="node-modal__point-value",w.textContent=`+${y}`,g.appendChild(b),g.appendChild(w),k.appendChild(g)}}),T.appendChild(k),E.appendChild(T)}const v=document.createElement("div");v.className="node-modal__toggle";const _=document.createElement("input");_.type="checkbox",_.id=`quest-${e.id}`,_.className="node-modal__checkbox",_.checked=o,_.addEventListener("change",T=>{const A=T.target.checked;ve(e.id,A,e.points||{}),c&&c(),A?i.classList.add("node-modal__content--completed"):i.classList.remove("node-modal__content--completed")});const S=document.createElement("label");if(S.htmlFor=`quest-${e.id}`,S.className="node-modal__checkbox-label",S.textContent=o?"Completed":"Mark as completed",v.appendChild(_),v.appendChild(S),E.appendChild(v),o){const T=document.createElement("div");T.className="node-modal__reflection";const A=document.createElement("label");A.className="node-modal__reflection-label",A.textContent="Reflection (optional):";const k=document.createElement("textarea");k.className="node-modal__reflection-input",k.placeholder="How did this feel? What did you learn?",k.rows=4;const I=oe();I.reflections&&I.reflections[e.id]&&(k.value=I.reflections[e.id]),k.addEventListener("blur",()=>{we(e.id,k.value)}),T.appendChild(A),T.appendChild(k),E.appendChild(T)}i.appendChild(E),t.appendChild(i),o&&i.classList.add("node-modal__content--completed");const O=T=>{T.key==="Escape"&&s()};return document.addEventListener("keydown",O),t.addEventListener("remove",()=>{document.removeEventListener("keydown",O)}),t}function he(e,s,c,o,t,n=[]){const i=new Set(s);e.innerHTML="";let h=e.clientWidth||window.innerWidth||1e3,u=e.clientHeight||window.innerHeight||800;const l="http://www.w3.org/2000/svg",r=document.createElementNS(l,"svg");r.setAttribute("viewBox",`0 0 ${h} ${u}`),r.setAttribute("class","skill-map");let m=100;const E=50,d=300,a=5,C=Array.from(new Set(n.map(p=>p.tier))).sort((p,R)=>p-R),v=h/2,_=u/2,S=Math.min(h,u),O=S*.18,T=S*.16,A=[];C.forEach((p,R)=>{const W=O+R*T,$=n.filter(j=>j.tier===p),z=$.length||1,B=Math.PI*2/z,P=-Math.PI/2;$.forEach((j,H)=>{const F=P+B*H,V=v+W*Math.cos(F),X=_+W*Math.sin(F);A.push({quest:j,x:V,y:X,tier:p})})}),A.forEach(({quest:p,x:R,y:W})=>{const $=document.createElementNS(l,"circle");$.setAttribute("cx",String(R)),$.setAttribute("cy",String(W)),$.setAttribute("r","10"),$.setAttribute("data-id",p.id),$.setAttribute("data-title",p.title),$.setAttribute("data-description",p.description);const z=i.has(p.id);$.setAttribute("class",z?"skill-map__node skill-map__node--completed":"skill-map__node"),$.addEventListener("click",P=>{P.stopPropagation(),c&&c(p)}),$.addEventListener("mouseenter",P=>{if(o){const j=e.getBoundingClientRect(),H={x:P.clientX-j.left,y:P.clientY-j.top};o(p,H)}}),$.addEventListener("mouseleave",()=>{t&&t()}),$.addEventListener("mousemove",P=>{if(o){const j=e.getBoundingClientRect(),H={x:P.clientX-j.left,y:P.clientY-j.top};o(p,H)}});const B=document.createElementNS(l,"text");B.setAttribute("x",String(R)),B.setAttribute("y",String(W+3)),B.setAttribute("class","skill-map__emoji"),B.setAttribute("data-id",p.id),B.textContent=p.emoji||"üçÉ",r.appendChild($),r.appendChild(B)}),e.appendChild(r);let k=!1,I={x:0,y:0},f={x:0,y:0};const y=p=>{p.preventDefault();const R=p.deltaY>0?-a:a;m=Math.max(E,Math.min(d,m+R)),x()},g=p=>{(p.button===1||p.button===2||p.button===0&&L)&&(p.preventDefault(),k=!0,I={x:p.clientX-f.x,y:p.clientY-f.y},e.style.cursor="grabbing")},b=p=>{k&&(f={x:p.clientX-I.x,y:p.clientY-I.y},x())},w=()=>{k=!1,e.style.cursor="grab"},x=()=>{const p=m/100;r.style.transform=`translate(${f.x}px, ${f.y}px) scale(${p})`,r.style.transformOrigin="center center"};let L=!1;const M=p=>{(p.key===" "||p.key==="Space")&&(L=!0,e.style.cursor="grab")},ie=p=>{(p.key===" "||p.key==="Space")&&(L=!1,e.style.cursor="")};e.addEventListener("wheel",y,{passive:!1}),e.addEventListener("mousedown",g),window.addEventListener("mousemove",b),window.addEventListener("mouseup",w),window.addEventListener("keydown",M),window.addEventListener("keyup",ie),e.addEventListener("contextmenu",p=>{k&&p.preventDefault()}),e.style.cursor="grab";const K=()=>{h=e.clientWidth||window.innerWidth||1e3,u=e.clientHeight||window.innerHeight||800,r.setAttribute("viewBox",`0 0 ${h} ${u}`),r.setAttribute("width",String(h)),r.setAttribute("height",String(u));const p=h/2,R=u/2,W=Math.min(h,u),$=W*.18,z=W*.16;C.forEach((B,P)=>{const j=$+P*z,H=n.filter(Q=>Q.tier===B),F=H.length||1,V=Math.PI*2/F,X=-Math.PI/2;H.forEach((Q,Ee)=>{const de=X+V*Ee,pe=p+j*Math.cos(de),me=R+j*Math.sin(de),Z=r.querySelector(`circle[data-id="${Q.id}"]`);Z&&(Z.setAttribute("cx",String(pe)),Z.setAttribute("cy",String(me)));const J=r.querySelector(`text[data-id="${Q.id}"]`);J&&(J.setAttribute("x",String(pe)),J.setAttribute("y",String(me+3)))})})},re=new ResizeObserver(K);return re.observe(e),window.addEventListener("resize",K),{svg:r,setZoom:p=>{m=Math.max(E,Math.min(d,p)),r.style.transform=`scale(${m/100})`,r.style.transformOrigin="center center"},getZoom:()=>m,destroy:()=>{e.removeEventListener("wheel",y),e.removeEventListener("mousedown",g),window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",w),window.removeEventListener("keydown",M),window.removeEventListener("keyup",ie),window.removeEventListener("resize",K),re.disconnect()}}}function Le(e,s,c){const o=document.createElement("div");o.className="list-tier";const t=document.createElement("button");t.className="list-tier__header",t.setAttribute("aria-expanded","true");const n=document.createElement("span");n.className="list-tier__title";const i={1:"üå±",2:"üåø",3:"üå≥"};n.textContent=`${i[e]||"üìã"} Tier ${e}`;const h=document.createElement("span");h.className="list-tier__count";const u=s.filter(a=>D(a.id)).length;h.textContent=`${u}/${s.length}`;const l=document.createElement("span");l.className="list-tier__icon",l.textContent="‚ñº",t.appendChild(n),t.appendChild(h),t.appendChild(l);const r=document.createElement("div");r.className="list-tier__content",r.style.display="block";const m=[...s].sort((a,C)=>{const v=D(a.id),_=D(C.id);return v===_?0:v?1:-1}),E=m.filter(a=>!D(a.id)),d=m.filter(a=>D(a.id));if(E.forEach(a=>{const C=fe(a,c);r.appendChild(C)}),E.length>0&&d.length>0){const a=document.createElement("div");a.className="list-tier__separator",a.textContent="Completed",r.appendChild(a)}return d.forEach(a=>{const C=fe(a,c);r.appendChild(C)}),t.addEventListener("click",()=>{const a=r.style.display!=="none";r.style.display=a?"none":"block",t.setAttribute("aria-expanded",!a),l.textContent=a?"‚ñ∂":"‚ñº",o.classList.toggle("list-tier--collapsed",a)}),o.appendChild(t),o.appendChild(r),o}function fe(e,s){const c=D(e.id),o=document.createElement("div");o.className=`list-node ${c?"list-node--completed":""}`,o.setAttribute("data-quest-id",e.id);const t=document.createElement("button");t.className="list-node__main";const n=document.createElement("div");n.className="list-node__left";const i=document.createElement("span");i.className="list-node__emoji",i.textContent=e.emoji||"üçÉ";const h=document.createElement("div");h.className="list-node__info";const u=document.createElement("span");u.className="list-node__title",u.textContent=e.title;const l=document.createElement("span");l.className="list-node__category",l.textContent=e.category,h.appendChild(u),h.appendChild(l),n.appendChild(i),n.appendChild(h);const r=document.createElement("div");if(r.className="list-node__right",e.points){const _=document.createElement("div");_.className="list-node__points",Object.entries(e.points).forEach(([S,O])=>{if(O>0){const A=le()[S]||S,k=document.createElement("span");k.className="list-node__point",k.textContent=`+${O} ${A.substring(0,3)}`,_.appendChild(k)}}),r.appendChild(_)}const m=document.createElement("input");m.type="checkbox",m.className="list-node__checkbox",m.checked=c,m.addEventListener("change",_=>{_.stopPropagation();const S=o.closest(".list-view-container"),O=S?S.scrollTop:0;ve(e.id,_.target.checked,e.points||{}),o.classList.toggle("list-node--completed",_.target.checked),S&&O>0&&requestAnimationFrame(()=>{S.scrollTop=O})});const E=document.createElement("span");E.className="list-node__expand",E.textContent="‚ñ∂",r.appendChild(m),r.appendChild(E),t.appendChild(n),t.appendChild(r);const d=document.createElement("div");d.className="list-node__details",d.style.display="none";const a=document.createElement("p");a.className="list-node__description",a.textContent=e.description;const C=document.createElement("div");C.className="list-node__actions";const v=document.createElement("button");return v.className="list-node__action-btn",v.textContent="View Details",v.addEventListener("click",_=>{_.stopPropagation(),s&&s(e)}),C.appendChild(v),d.appendChild(a),d.appendChild(C),t.addEventListener("click",()=>{const _=d.style.display!=="none";d.style.display=_?"none":"block",E.textContent=_?"‚ñ∂":"‚ñº",o.classList.toggle("list-node--expanded",!_)}),o.appendChild(t),o.appendChild(d),o}function ke(e,s=[]){const c=document.createElement("div");c.className="list-view";let o="all",t=0;const n=c.closest(".list-view-container")||c.parentElement;function i(){n&&(t=n.scrollTop)}function h(){n&&t>0&&requestAnimationFrame(()=>{n.scrollTop=t})}function u(){i(),c.innerHTML="";const l=document.createElement("div");l.className="list-view__filters",[{id:"all",label:"All"},{id:"active",label:"Active"},{id:"completed",label:"Completed"}].forEach(d=>{const a=document.createElement("button");a.className=`list-view__filter ${o===d.id?"list-view__filter--active":""}`,a.textContent=d.label,a.addEventListener("click",()=>{o=d.id,u()}),l.appendChild(a)}),c.appendChild(l);const m=new Map;s.forEach(d=>{m.has(d.tier)||m.set(d.tier,[]),m.get(d.tier).push(d)}),Array.from(m.keys()).sort((d,a)=>d-a).forEach(d=>{const a=m.get(d);let C=a;if(o==="active"?C=a.filter(v=>!D(v.id)):o==="completed"&&(C=a.filter(v=>D(v.id))),C.length>0||o==="all"){const _=Le(d,o==="all"?a:C,e);c.appendChild(_)}}),h()}return u(),Ce(()=>{u()}),c}function ee(e,s){const c=document.createElement("div");c.className="progress-stepper";const o=s?Math.round(e/s*100):0,t=[0,25,50,75,100],n=document.createElement("div");n.className="progress-stepper__bar",t.forEach((h,u)=>{const l=document.createElement("div");l.className="progress-stepper__step";const r=o>=h,m=o>=h&&(u===t.length-1||o<t[u+1]);r&&l.classList.add("progress-stepper__step--reached"),m&&l.classList.add("progress-stepper__step--current");const E=document.createElement("div");E.className="progress-stepper__circle",r?E.textContent="‚úì":E.textContent=h;const d=document.createElement("div");if(d.className="progress-stepper__label",d.textContent=`${h}%`,l.appendChild(E),l.appendChild(d),u<t.length-1){const a=document.createElement("div");a.className="progress-stepper__connector",r&&o>=t[u+1]&&a.classList.add("progress-stepper__connector--filled"),l.appendChild(a)}n.appendChild(l)});const i=document.createElement("div");return i.className="progress-stepper__info",i.textContent=`${e} of ${s} nodes completed`,c.appendChild(n),c.appendChild(i),c}function te(e,s){const c=document.createElement("div");c.className="settings-menu";const o=document.createElement("button");o.className="settings-menu__button",o.setAttribute("aria-label","Settings menu"),o.setAttribute("aria-expanded","false"),o.textContent="‚ò∞";const t=document.createElement("div");t.className="settings-menu__dropdown",t.style.display="none";const n=document.createElement("button");n.className="settings-menu__item",n.textContent="Export JSON",n.addEventListener("click",()=>{e&&e(),u()});const i=document.createElement("button");i.className="settings-menu__item settings-menu__item--danger",i.textContent="Clear All",i.addEventListener("click",()=>{window.confirm("Reset all completed quests and reflections?")&&s&&s(),u()}),t.appendChild(n),t.appendChild(i);function h(){t.style.display="block",o.setAttribute("aria-expanded","true"),o.classList.add("settings-menu__button--active")}function u(){t.style.display="none",o.setAttribute("aria-expanded","false"),o.classList.remove("settings-menu__button--active")}return o.addEventListener("click",l=>{l.stopPropagation(),t.style.display==="block"?u():h()}),document.addEventListener("click",l=>{c.contains(l.target)||u()}),c.appendChild(o),c.appendChild(t),c}function ge(){return window.innerWidth<768||window.innerHeight>window.innerWidth}function Ae(e,{quests:s,config:c}){be();let o=null,t=null,n=ge()?"list":"tree";function i(){const d={progress:oe(),quests:s,config:c,exportedAt:new Date().toISOString()},a=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),C=URL.createObjectURL(a),v=document.createElement("a");v.href=C,v.download=`${c?.appName?.toLowerCase().replace(/\s+/g,"-")||"skill-tree"}-progress.json`,v.click(),URL.revokeObjectURL(C)}function h(d){o&&u(),o=xe(d,u,()=>{m()}),e.appendChild(o)}function u(){o&&(o.dispatchEvent(new Event("remove")),o.remove(),o=null)}let l=e.querySelector(".fullscreen-container"),r=!0;function m(){const{completedQuests:d}=oe(),a=d.length,C=s.length;if(r||!l)e.innerHTML="",l=document.createElement("div"),l.className="fullscreen-container",e.appendChild(l),r=!1;else if(n==="list"){const f=l.querySelector(".overlay-stats");if(f){f.innerHTML="";const g=document.createElement("button");g.className="view-toggle",g.setAttribute("aria-label","Toggle view");const b=document.createElement("span");b.className="view-toggle__icon",b.textContent=n==="tree"?"‚ò∞":"üå≥";const w=document.createElement("span");w.className="view-toggle__label",w.textContent=n==="tree"?"List":"Tree",g.appendChild(b),g.appendChild(w),g.addEventListener("click",()=>{n=n==="tree"?"list":"tree",r=!0,m()});const x=te(i,()=>{G()}),L=document.createElement("div");L.className="character-stats__toggle",L.appendChild(g),L.appendChild(x);const M=q(a,C,L);f.appendChild(M)}const y=l.querySelector(".list-view-container");if(y){const g=y.querySelector(".progress-stepper");if(g){const b=ee(a,C);g.replaceWith(b)}}return}else if(n==="tree"){const f=l.querySelector(".overlay-stats");if(f){f.innerHTML="";const g=document.createElement("button");g.className="view-toggle",g.setAttribute("aria-label","Toggle view");const b=document.createElement("span");b.className="view-toggle__icon",b.textContent=n==="tree"?"‚ò∞":"üå≥";const w=document.createElement("span");w.className="view-toggle__label",w.textContent=n==="tree"?"List":"Tree",g.appendChild(b),g.appendChild(w),g.addEventListener("click",()=>{n=n==="tree"?"list":"tree",r=!0,m()});const x=te(i,()=>{G()}),L=document.createElement("div");L.className="character-stats__toggle",L.appendChild(g),L.appendChild(x);const M=q(a,C,L);f.appendChild(M)}const y=l.querySelector(".tree-visual-fullscreen");if(y){const g=y.querySelector(".tree-visual__canvas-fullscreen");g&&t&&(t.destroy&&t.destroy(),t=he(g,d,b=>h(b),(b,w)=>{const x=y.querySelector(".tree-tooltip");if(x&&b&&w){x.style.display="block",x.textContent=`${b.emoji||"üçÉ"} ${b.title}`;const L=x.offsetWidth||150;let M=w.x;M<L/2?M=L/2:M>y.clientWidth-L/2&&(M=y.clientWidth-L/2),x.style.left=`${M}px`,x.style.top=`${Math.max(w.y-8,8)}px`}},()=>{const b=y.querySelector(".tree-tooltip");b&&(b.style.display="none")},s))}return}let v=l.querySelector(".overlay-stats");v?v.innerHTML="":(v=document.createElement("div"),v.className="overlay-stats",l.appendChild(v));const _=document.createElement("button");_.className="view-toggle",_.setAttribute("aria-label","Toggle view");const S=document.createElement("span");S.className="view-toggle__icon",S.textContent=n==="tree"?"‚ò∞":"üå≥";const O=document.createElement("span");O.className="view-toggle__label",O.textContent=n==="tree"?"List":"Tree",_.appendChild(S),_.appendChild(O),_.addEventListener("click",()=>{n=n==="tree"?"list":"tree",r=!0,m()});const T=te(i,()=>{G()}),A=document.createElement("div");A.className="character-stats__toggle",A.appendChild(_),A.appendChild(T);const k=q(a,C,A);if(v.appendChild(k),n==="tree"){let b=function(w,x){if(g)if(w&&x){g.style.display="block",g.textContent=`${w.emoji||"üçÉ"} ${w.title}`;const L=g.offsetWidth||150;let M=x.x;M<L/2?M=L/2:M>f.clientWidth-L/2&&(M=f.clientWidth-L/2),g.style.left=`${M}px`,g.style.top=`${Math.max(x.y-8,8)}px`}else g.style.display="none"};var I=b;let f=l.querySelector(".tree-visual-fullscreen");if(!f){f=document.createElement("section"),f.className="tree-visual-fullscreen";const w=document.createElement("div");w.className="tree-visual__canvas-fullscreen",f.appendChild(w),l.appendChild(f);const x=document.createElement("div");x.className="tree-tooltip",x.style.display="none",f.appendChild(x)}let y=f.querySelector(".tree-visual__canvas-fullscreen");y||(y=document.createElement("div"),y.className="tree-visual__canvas-fullscreen",f.appendChild(y));const g=f.querySelector(".tree-tooltip");t&&t.destroy&&(t.destroy(),t=null),y.innerHTML="",t=he(y,d,w=>h(w),(w,x)=>b(w,x),()=>b(null),s)}else{let f=l.querySelector(".list-view-container");if(f){const y=f.querySelector(".progress-stepper");if(y){const g=ee(a,C);y.replaceWith(g)}}else{f=document.createElement("section"),f.className="list-view-container",l.appendChild(f);const y=ee(a,C);f.appendChild(y);const g=ke(b=>h(b),s);f.appendChild(g)}}if(n==="tree"){const f=document.createElement("div");f.className="overlay-bottom";const y=document.createElement("div");y.className="overlay-instructions",y.textContent="Scroll to zoom ‚Ä¢ Drag to pan ‚Ä¢ Click nodes for details",f.appendChild(y),l.appendChild(f)}}const E=()=>{ge()&&n==="tree"&&(n="list",m())};return window.addEventListener("resize",E),m(),Ce(m),()=>{window.removeEventListener("resize",E),t&&t.destroy&&t.destroy(),o&&u()}}let ne=null;async function Te(){if(ne)return ne;try{const e=await fetch("config.json");if(!e.ok)throw new Error("Failed to load config.json");const s=await e.json();return(!s.quests||!Array.isArray(s.quests))&&(console.warn("config.json missing quests array, using empty array"),s.quests=[]),(!s.statTypes||typeof s.statTypes!="object")&&(console.warn("config.json missing statTypes, using defaults"),s.statTypes={goodness:"Goodness",thoughtfulness:"Thoughtfulness",kindness:"Kindness",empathy:"Empathy"}),(!s.defaultStats||typeof s.defaultStats!="object")&&(console.warn("config.json missing defaultStats, initializing from statTypes"),s.defaultStats={},Object.keys(s.statTypes).forEach(c=>{s.defaultStats[c]=0})),ne=s,s}catch(e){return console.error("Failed to load config.json:",e),{appName:"Skill Tree",statTypes:{goodness:"Goodness",thoughtfulness:"Thoughtfulness",kindness:"Kindness",empathy:"Empathy"},defaultStats:{goodness:0,thoughtfulness:0,kindness:0,empathy:0},storageKey:"skill_tree_progress",quests:[]}}}async function Me(){const e=document.querySelector("#app");if(!e){console.error("App root element not found");return}try{const s=await Te();ye(s);const c=s.quests||[];if(c.length===0){console.warn("No quests found in config.json"),e.innerHTML='<div style="padding: 2rem; text-align: center; color: #e5e7eb;"><h2>No quests found</h2><p>Please ensure config.json contains a "quests" array with at least one quest.</p></div>';return}Ae(e,{config:s,quests:c})}catch(s){console.error("Failed to initialize app:",s),e.innerHTML='<div style="padding: 2rem; text-align: center; color: #e5e7eb;"><h2>Error loading app</h2><p>Please check the console for details.</p></div>'}}Me();
